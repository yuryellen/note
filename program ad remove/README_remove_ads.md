# 中文小说广告删除工具

这是一个用于自动识别和删除中文小说txt文件中广告内容的Python程序。

## 功能特点

- **智能识别广告**：基于关键词、网址、联系方式等模式识别广告
- **批量处理**：支持单个文件和整个目录的处理
- **安全备份**：不会修改原文件，生成清理后的新文件
- **详细统计**：显示删除的广告段落数量

## 支持的广告类型

1. **显式广告标识**：包含"广告"、"推广"、"赞助"等关键词
2. **联系方式**：手机号、QQ号、微信号、固定电话
3. **网址链接**：http/https链接、域名
4. **平台推广**：小说平台名称、应用商店
5. **营销词汇**："免费"、"下载"、"注册"、"优惠"等
6. **异常段落**：过短的段落、特殊字符比例过高的段落

## 安装要求

- Python 3.6+
- 无需额外依赖

## 使用方法

### 1. 处理单个文件

```bash
python remove_ads.py 小说.txt
```
这将在同一目录生成 `小说_cleaned.txt` 文件

### 2. 指定输出文件

```bash
python remove_ads.py 小说.txt -o 清理后的小说.txt
```

### 3. 处理整个目录

```bash
python remove_ads.py 小说目录/
```
这将在目录下创建 `cleaned` 子目录存放所有清理后的文件

### 4. 指定输出目录

```bash
python remove_ads.py 小说目录/ -o 输出目录/
```

## 示例

假设有一个包含广告的小说文件 `novel.txt`：

```
第一章 重生

她睁开眼睛，发现自己回到了十年前。

广告：下载起点读书APP，海量小说免费看！
网址：www.qidian.com

她决定改变自己的命运。

联系方式：QQ 123456789
微信：novel_fan

她开始了新的生活。
```

运行程序后，生成的 `novel_cleaned.txt` 将只包含：

```
第一章 重生

她睁开眼睛，发现自己回到了十年前。

她决定改变自己的命运。

她开始了新的生活。
```

## 自定义配置

如果需要调整广告识别规则，可以修改 `ChineseNovelAdRemover` 类中的：

- `ad_keywords`：广告关键词列表
- `min_paragraph_length`：最小段落长度阈值
- 数字和特殊字符比例阈值

## 注意事项

- 程序使用UTF-8编码，确保源文件也是UTF-8编码
- 建议先在小文件上测试效果
- 程序不会删除章节标题、作者信息等正常内容
- 如果误删了正常内容，可以手动恢复

## 故障排除

如果遇到编码问题，可以尝试：
```bash
python remove_ads.py 小说.txt -o 输出.txt --encoding utf-8
```

如果程序运行缓慢，可以调整段落分割方式或优化正则表达式。
